<template>
  <v-app class="tasksList pt-5">
    <div
      v-for="task in tasks"
      :key="task.id"
      class="tasksListItem">
      <tasks-list-item
        :task="task"
        @update-taskCompleted="updateTaskCompleted"/>
    </div>
  </v-app>
</template>
<script>
  export default {
    props: {
      tasks: {
        type: Array,
        default: () => [],
      }
    },
    data() {
      return {
        filterTaskCompletedActive: false,
      }
    },
    methods: {
      updateTaskCompleted(e) {
        this.filterCompletedActive();
        if (!this.filterTaskCompletedActive) {
          window.setTimeout(() => this.tasks = this.tasks.filter((t) => t.task.id !== e.id), 500);
        }
      },
      filterCompletedActive() {
        this.tasks.forEach(task_elm => {
          while (task_elm.completed === true) {
            this.filterTaskCompletedActive = true;
            break;
          }
        })
      },
    }
  }

</script>
